<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" type="text/css" href="../css/main.css" />
    <link
      href="https://fonts.googleapis.com/icon?family=Material+Icons+Sharp"
      rel="stylesheet"
    />
    <title>Document</title>
  </head>
  <body>
    <div class="container">
      <aside>
        <div class="top">
          <div class="logo">
          <span class="material-icons-sharp">account_balance</span>

            <h2>BudgetBetter</h2>
          </div>
          <div class="close" id="close-btn">
            <span class="material-icons-sharp"> close </span>
          </div>
        </div>

        <div class="sidebar">
          <a href="#" class="active">
            <span class="material-icons-sharp"> grid_view </span>
            <h3>Dashboard</h3>
          </a>
          <a href="#">
            <span class="material-icons-sharp"> receipt_long </span>
            <h3>Expenses</h3>
          </a>

          <a href="#">
            <span class="material-icons-sharp"> mail_outline </span>
            <h3>Notifications</h3>
            <!-- <span class="message-count">26</span> -->
          </a>
          <a href="#">
            <span class="material-icons-sharp"> inventory </span>
            <h3>News</h3>
          </a>

          <a href="#">
            <span class="material-icons-sharp"> settings </span>
            <h3>Settings</h3>
          </a>

          <a href="../../">
            <span class="material-icons-sharp"> logout </span>
            <h3>Logout</h3>
          </a>
        </div>
      </aside>

      <main>
        <div class="tab">
          <div class="news-tab">
            <h1 class="tab-title">Dashboard</h1>



            <div class="insights">
              <div class="credit">
                <span class="material-icons-sharp"> credit_card </span>
                <div class="middle">
                  <h3>Available Credit</h3>
                  <h1 id="available-credit">$300</h1>
                  <small class="text-muted"> This Month </small>
                </div>
              </div>
              <!-- Credit End -->

              <div class="balance">
                <span class="material-icons-sharp"> account_balance </span>
                <div class="middle">
                  <h3>Account Balance</h3>
                  <h1 id="account-balance-num">N/A</h1>
                  <small class="text-muted"> Current </small>
                </div>
              </div>
              <!-- Account Balance End -->

              <div class="expenses">
                <span class="material-icons-sharp"> trending_down </span>
                <div class="middle">
                  <h3>Expenses</h3>
                  <h1 id="account-expenses">-$1200</h1>
                  <small class="text-muted"> This Month </small>
                </div>
              </div>
              <!-- Expenses End -->
            </div>
            <!-- End of Insights  -->

            <div class="visuals">
              <h2>Visual Analytics</h2>
              <div class="carousel">
                <canvas class="carousel__item"></canvas>
                <canvas class="carousel__item" style="display:none;"></canvas>
                <canvas class="carousel__item" style="display:none;"></canvas>
                <span class="material-icons-sharp left-arrow arrow">
                  arrow_back_ios
                </span>
                <span class="material-icons-sharp right-arrow arrow">
                  arrow_forward_ios
                </span>
              </div>
            </div>
          </div>
        </div>

        <!-- Expense Tracker -->
        <div class="tab" style="display:none;">
          <div class="news-tab">
            <h1 class="tab-title">Expense Tracker</h1>
            <div class="expense-container">
              <h4>Your Balance</h4>
              <h1>$0.00</h1>
              <div class="inc-exp-container">
                <div>
                  <h4>Income</h4>
                  <p id="money-plus" class="money plus">+$5500</p>
                </div>
                <div>
                  <h4>Expenses</h4>
                  <p id="money-minus" class="money minus">-$2124</p>
                </div>
              </div>
              <h3>History</h3>
              <div class="recent-orders">
                <h2>Recent Transactions</h2>
                <table>
                  <thead>
                    <tr>
                      <th>Transaction Origin</th>
                      <th>Order Number</th>
                      <th>Payment Amount</th>
                      <th>Status</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr>
                      <td>UC Davis Tuition</td>
                      <td>92013</td>
                      <td>$1200</td>
                      <td class="warning">Pending</td>
                      <td class="primary">Details</td>
                    </tr>
                    <tr>
                      <td>Venmo</td>
                      <td>92014</td>
                      <td>$849</td>
                      <td class="warning">Pending</td>
                      <td class="primary">Details</td>
                    </tr>
                    <tr>
                      <td>Netflix</td>
                      <td>92015</td>
                      <td>$10</td>
                      <td class="success">Processed</td>
                      <td class="primary">Details</td>
                    </tr>
                    <tr>
                      <td>Aggie Liquor</td>
                      <td>92016</td>
                      <td>$40</td>
                      <td class="success">Processed</td>
                      <td class="primary">Details</td>
                    </tr>
                    <tr>
                      <td>Barnes&Noble</td>
                      <td>92017</td>
                      <td>$25</td>
                      <td class="success">Processed</td>
                      <td class="primary">Details</td>
                    </tr>
                  </tbody>
                </table>
                <a href="#">Show All</a>
              </div>
            </div>
          </div>
        </div>



        <!-- Notifications -->
        <div class="tab" style="display:none;">
          <div class="notifications-tab">
          <h1 class="tab-title">Notifications</h1>
            <h4 class="inbox">Inbox</h4>
            <div class="message-container">
              <div class="inbox-message">
                <div class="msg-info">
                  <p class="msg-title">BudgetBetter</p>
                    <p class="msg-description">You spend $486 more than you deposit. Here are some financial management tips.</p>
                  </div>
                <span class="material-icons-sharp">open_in_new</span>

              </div>
              <hr class="separation-line-inbox">
          </div>
            <div class="message-container">
              <div class="inbox-message">
                <div class="msg-info">
                  <p class="msg-title">Bank of America</p>
                    <p class="msg-description">You have gone over your credit limit by $312.64. Your mortgage is on the line.</p>
                  </div>
                <span class="material-icons-sharp">open_in_new</span>

              </div>
              <hr class="separation-line-inbox">
          </div>
            <div class="message-container">
              <div class="inbox-message">
                <div class="msg-info">
                  <p class="msg-title">University of California, Davis</p>
                    <p class="msg-description">Your student loan payment is due tomorrow. Education is expensive, pay up! :)</p>
                  </div>
                <span class="material-icons-sharp">open_in_new</span>

              </div>
              <hr class="separation-line-inbox">
          </div>
            <div class="message-container">
              <div class="inbox-message">
                <div class="msg-info">
                  <p class="msg-title">BudgetBetter</p>
                    <p class="msg-description">Welcome to BudgetBetter! Open me to learn more.</p>
                  </div>
                <span class="material-icons-sharp">open_in_new</span>

              </div>
              <hr class="separation-line-inbox">
          </div>
          </div>
        </div>

        <!-- News -->
        <div class="tab" style="display:none;">
          <div class="news-tab">
            <h1 class="tab-title">News</h1>
            <h4 class="recent-news">Recent News</h4>
            <div class="news-article-container">
              <div class="news-article">
                <div class="news-article-info">
                  <p class="news-article-title">Don Young, Alaska Congressman Who Was Dean of the House, Dies at 88</p>
                    <p class="news-article-description">Mr. Young, who was first elected in 1973, during the Nixon administration, became the longest-serving Republican in House history in 2019.</p>
                  </div>
                <img class='news-article-img' src="https://static01.nyt.com/images/2022/03/18/multimedia/18-obit-young--alaska/merlin_141953070_83136434-7b70-47a1-bbf5-e88294b921a4-threeByTwoMediumAt2X.jpg?format=pjpg&quality=75&auto=webp&disable=upscale" alt="">

              </div>
              <hr class="separation-line">
            </div>
            <div class="news-article-container">
              <div class="news-article">
                <div class="news-article-info">
                  <p class="news-article-title">Why the Federal Reserve raises interest rates to combat inflation</p>
                    <p class="news-article-description">The central bank is likely to raise its target federal funds rate by 25 basis points to address the worst inflation in more than 40 years, partially brought on by the coronavirus pandemic</p>
                  </div>
                <img class='news-article-img' src="https://image.cnbcfm.com/api/v1/image/107028789-1646954794683-gettyimages-1384030484-dscf3093_2022031053903605.jpeg?v=1646954840&w=600&h=300&vtcrop=y" alt="">

              </div>
              <hr class="separation-line">
            </div>
            <div class="news-article-container">
              <div class="news-article">
                <div class="news-article-info">
                  <p class="news-article-title">Watch to watch in markets in the week ahead</p>
                    <p class="news-article-description">Investors may take the Federal Reserve's first post-pandemic interest rate hike in stride, while uncertainity over the Ukraine crisis contiues to hang over markets.</p>
                  </div>
                <img class='news-article-img' src="https://image.cnbcfm.com/api/v1/image/107029312-Traders-TF-Photo-20220311-ACJ-010-PRESS-3.jpg?v=1647028314&w=740&h=416" alt="">

              </div>
              <hr class="separation-line">
            </div>
          </div>
        </div>


        <!-- Settings -->
        <div class="tab" style="display:none;">
          <div class="news-tab">
            <h1 class="tab-title">Settings</h1>
            <div class="settings">
              <div class="profile-info">
                <h2 class="account-info-title">Account Information</h2>
                <div class="profile-section-box">
                  <div class="account-info-container">
                    <h5 class="account-info">Email:</h5>
                    <p></p>
                  </div>
                  <span class="material-icons-sharp edit-button">edit</span>
                </div>
                <div class="profile-section-box">
                  <div class='account-info-container'>
                    <h5 class="account-info">Name:</h5>
                    <p></p>
                  </div>
                  <span class="material-icons-sharp edit-button">edit</span>
                </div>
                <div class="profile-section-box">
                  <div class="account-info-container">
                    <h5 class="account-info">Phone:</h5>
                    <p></p>
                  </div>
                  <span class="material-icons-sharp edit-button">edit</span>
                </div>
              </div>

              <div class="color_mode">
                <div class="theme-toggler">
                  <h2>Theme Toggler</h2>
                  <div class="themes">
                  <span class="material-icons-sharp active light_button"> light_mode </span>
                  <span class="material-icons-sharp"> dark_mode </span>
                  </div>
                </div>
              </div>
              <!-- Expenses End -->
            </div>
          </div>
        </div>
      </main>
      <!-- End of Main Section -->

      <div class="right">
        <div class="top">
          <button id="menu-btn">
            <span class="material-icons-sharp"> menu </span>
          </button>
          <div class="theme-toggler">
            <!-- <span class="material-icons-sharp active"> light_mode </span>
            <span class="material-icons-sharp"> dark_mode </span> -->
          </div>
          <div class="profile">
            <div class="info">
              <p>Hey, <b>Name</b></p>
            </div>

          </div>
        </div>
        <!-- End of Top  -->

        <div class="recent-updates">
          <h2>Recent News</h2>
          <div class="updates">
            <div class="update">
              <div class="profile-photo">
            <span class="material-icons-sharp">feed</span>
              </div>
              <div class="message">
                <p><b>Elon Musk</b> says invest in Dogecoin! You do not want to miss out!</p>
                <small class="text-muted">2 Minutes Ago</small>
              </div>
            </div>
            <div class="update">
              <div class="profile-photo">
                <span class="material-icons-sharp">feed</span>
              </div>
              <div class="message">
                <p><b>Elon Musk</b> says invest in Dogecoin! You do not want to miss out!</p>
                <small class="text-muted">2 Minutes Ago</small>
              </div>
            </div>
            <div class="update last-update">
              <div class="profile-photo">
               <span class="material-icons-sharp">feed</span>
              </div>
              <div class="message">
                <p><b>Elon Musk</b> says invest in Dogecoin! You do not want to miss out!</p>
                <small class="text-muted">2 Minutes Ago</small>
              </div>
            </div>
          </div>
        </div>
        <!-- End of Recent News -->
        <div class="sales-analytics">
          <h2>Recent Transactions</h2>
          <div class="item online">
            <div class="icon">
              <span class="material-icons-sharp"> monetization_on </span>
            </div>
            <div class="right">
              <div class="info">
                <h3>ONLINE ORDERS</h3>
                <small class="text-muted">24 Hours Ago</small>
              </div>
              <h5 class="success">+39%</h5>
              <h3>$3849</h3>
          </div>
        </div>
          <div class="item offline">
            <div class="icon">
              <span class="material-icons-sharp"> south </span>
            </div>
            <div class="right">
              <div class="info">
                <h3>OFFLINE ORDERS</h3>
                <small class="text-muted">24 Hours Ago</small>
              </div>
              <h5 class="danger">-14%</h5>
              <h3>$1000</h3>
          </div>
        </div>
          <div class="item customers">
            <div class="icon">
              <span class="material-icons-sharp"> monetization_on </span>
            </div>
            <div class="right">
              <div class="info">
                <h3>VENMO</h3>
                <small class="text-muted">24 Hours Ago</small>
              </div>
              <h5 class="success">+20%</h5>
              <h3>$849</h3>
          </div>
        </div>
        <div class="item add-product">
          <div>
            <span class="material-icons-sharp">add</span>
            <h3 class="load-more">Load More</h3>
          </div>
        </div>
      </div>
    </div>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="../js/main.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.2.3/jquery.min.js"></script>
    <script src="https://cdn.plaid.com/link/v2/stable/link-initialize.js"></script>
    <script>
      // Retrieves balance information
      const getBalance = async function () {
        const balance = await fetch("/api/data", {
          method: "GET",
        });
        const balanceData = await balance.json();

        const user = await fetch("/api/user", {
          method: "GET",
        });

        const userData = await user.json();
        //Render response data
        console.log(balanceData)
        // configureBalance(balanceData)
        console.log(userData)
        configureUser(userData);
        retrieveBalance(balanceData);
        getAvailableCredit(balanceData);
      };

      // Check whether account is connected
      const getStatus = async function () {
        const account = await fetch("/api/is_account_connected");
        const connected = await account.json();
        if (connected.status == true) {
          getBalance();
        }
      };

      getStatus();
    </script>
  </body>
</html>
